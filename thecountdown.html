<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Amutha &amp; Tom Wedding</title>
	<link rel="stylesheet" href="bootstrap-3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/flipclock.css">
	<link rel="stylesheet" href="css/colorbox.css">
</head>
<body>
	<div class="container container-my background">
		<div class="row">
			<div class="col-md-2">
				<!-- <div class="belgium-flag"></div> -->
			</div>
			<div class="col-md-8">
				<div class="countdown-wrapper">
					<div class="countdown"></div>
				</div>	
			</div>
			<div class="col-md-2">
				<!-- <div class="malaysia-flag"></div> -->
			</div>
		</div>		

		<div class="navbar navbar-default my-navbar-default">
			<div class="container-fluid">
				<div class="collapse navbar-collapse" id="">
					<ul class="nav navbar-nav">
						<li><a id="wed_what" data-target="wed_def" href="#">Why?</a></li>
						
						<li><a id="wed_when" data-target="wed_details" href="#">When?</a></li>

						<li style="margin-top: -40px;"><a id="wed_what" data-target="welcome_page" href="#">
							<img class="image-at" src="resources/images/atcircle.png" alt=""></a>
						</li>
						
						<li><a id="wed_where" data-target="wed_where_details" href="#">Where?</a></li>
						
						<li><a id="wed_how" data-target="web_attendance" href="#">How?</a></li>
					</ul>
				</div><!-- /.navbar-collapse -->
			</div>
		</div>

		<div class="content">
			<div class="sub-content active-div welcome-page" id="welcome_page">
				<div class="text-info">
					<span class="wed-name">Amutha &amp; Tom</span>
					<span class="sub-text">Please join us for the ride of our lives</span>
				</div>
				<!-- <div class="row">
					<div class="save-the-date"></div>
				</div> -->
			</div>

			<div class="sub-content wedding-definition" id="wed_def">
				<div class="text-content">
					<span>
						It says online that Marriage, also called matrimony or wedlock, is a socially or ritually recognized union or legal contract between spouses that establishes rights and obligations between them, between them and their children, and between them and two families.
					</span>

					<span>
						So that's why
					</span>

					<span>
						Just joking!!! We are actually crazy about each other and thought it would be fun to get everyone together and celebrate our union.
					</span>
				</div>
			</div>
			<div class="sub-content their-story" id="wed_where_details">
				<div class="text-content">
					<!-- <span style="font-size: 40px;">
						Wedding
					</span> -->
					<span style="font-size: 40px; margin-top: 40px; margin-bottom: 15px;">
						Wedding: Leuven City Hall	
					</span>
					<!-- <span style="font-size: 40px;">
						Lunch
					</span> -->
					<span style="font-size: 24px;">
						Lunch: The Lust Bistro, Wieringstraat
					</span>
				</div>
			</div>
			<div class="sub-content detail" id="wed_details">
				<div class="text-content">
					<span style="font-size: 70px; margin-top: 40px;">
						January 23rd, 2016 
					</span>
					<span style="font-size: 40px;">
						11:15 a.m.
					</span>
					<br />
					

				</div>
			</div>			
			<div class="sub-content" id="web_attendance">
				<div class="text-content">
					

					<div class="row attendance-reason-list">
						<div class="attendance-attending col-md-6 col-lg-6">
							<ul>
								<li class="li-title">Yes, I am attending.</li>
								<li><a href="#attendee_info">Glad to attend. Love you both!</a></li>
								<li><a href="#attendee_info">Glad to attend (I don't love you though).</a></li>
								<li><a href="#attendee_info">Wait! You mean this was optional??</a></li>
								<li><a href="#attendee_info">Two words... Free booze..</a></li>
								<li><a href="#attendee_info">I am fully aware that the "NO" option is a trap.</a></li>
								<li><a href="#attendee_info">Cause I love Belgian chocolate.</a></li>
							</ul>
						</div>
						<div class="attendance-notattending col-md-6 col-lg-6">
							<ul>
								<li class="li-title">No, I am not attending</li>
								<li><a href="#attendee_info">Regretfully decline as I have other matters to attend to.</a></li>
								<li><a href="#attendee_info">My twice removed cousin's brother's mother's great grandfather died.</a></li>
								<li><a href="#attendee_info">I will be visiting.. ermm.. Pakistan, yeah Pakistan. But it is a secret if you ask anyone, they will have no idea what you are talking about.</a></li>
								<li><a href="#attendee_info">I'm planning to be sick on that day!!</a></li>
								<li><a href="#attendee_info">Who are you and how did you get my email address! Leave me alone!</a></li>
							</ul>
						</div>
					</div>
					
					<span style="margin-top: 35px">
						Dress Code: Make an effort. We are getting married!!
					</span>
					<span style="margin-top: -12px; color: red;">
						Please note, all non RSVP guests will be burned alive. That is all.
					</span>
				</div>
			</div>
		</div>
	</div>

	<div style="display:none;">
		<div class="attendee-info col-xs-12" id="attendee_info">
			<label for="attendee-name">Name</label>
			<input type="text" name="attendee-name" id="attendee_name">	
			<label for="attendee-email">Email Address</label>
			<input type="text" name="attendee-email" id="attendee_email">

			<span>It better be a good reason!</span>

			<input type="submit" id="submit_answer" value="Confirm My Attendance">

			<input type="hidden" name="attendee-reason" id="attendee_reason" value="">
			<input type="hidden" name="attendee-attendance" id="attendee_attendance" value="">

		</div>
	</div>


	<script src="scripts/jquery-2.1.4.min.js"></script>
	<script src="bootstrap-3.3.5/js/bootstrap.min.js"></script>
	<script src="scripts/flipclock.min.js"></script>	
	<script src="scripts/jquery.colorbox-min.js"></script>	

	<script type="text/javascript">
		$(function(){

			// For flip clock 
			var currentDate  = new Date();
			var futureDate = new Date("January 23, 2016 12:00:00");

			var diff = futureDate.getTime() / 1000 - currentDate.getTime() / 1000;

			clock = $('.countdown').FlipClock(diff, {
				clockFace: 'DailyCounter',
				countdown: true,
			});

			// Switching between contents

			$('.nav > li > a').on('click', function(evt){
				evt.preventDefault();

				var targetDiv = $(this).data('target');

				// remove the active-div from all the child of content 
			
				if(!$('#' + targetDiv).hasClass('active-div'))
				{
					$('.sub-content').each(function(){
						$(this).removeClass('active-div');
					});

					$('#' + targetDiv).addClass('active-div');	
				}
			});

			// For Colorbox

			$('.attendance-reason-list li>a').colorbox({ inline:true, width:"40%" });

			$('.attendance-attending ul>li').on('click', function()
			{ 
				$('#attendee_reason').val($(this).children('a').html());
				console.log($('#attendee_reason').val());
				$('#attendee_attendance').val(true);
				
			});

			$('.attendance-notattending ul>li').on('click', function()
			{ 
				$('#attendee_reason').val($(this).children('a').html());
				console.log($('#attendee_reason').val());
				$('#attendee_attendance').val(false);
			});

			// for the reason and etc 

			function validateChoices(){
				var emailReg = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
				if($("input[name=attendee-name]").val().length > 0 &&
					$("input[name=attendee-email]").val().length > 0 &&
					$("input[name=attendee-email]").val().match(emailReg))
				{
					return true;
				}
				else
				{
					return false;
				}
			}

			validateChoices();
			$('#attendee_name, #attendee_email').on('change', function(){
				validateChoices();
			});

			$('#submit_answer').on('click', function(){
				if(validateChoices())
				{
					sendEmail($('#attendance_name').val(), $('#attendance_email').val(), $('#attendance_attendance').val(), $('#attendance_reason').val());
				}
				else
				{
					alert('Check your name and email address again! Make sure its right and there!');
				}
			});

			function sendEmail(attendeeName, email, attendance, reason)
			{
				console.log(attendeeName + " " + email + " " + attendance + " " + reason);
				var post_data = {
					'name'			: attendeeName,
					'email_address' : email,
					'attending'		: attendance,
					'reason'		: reason,

				}

				$.ajax({
					type: "POST",
					url: "./mailer.php",
					data: post_data,
					success: function(data){
						alert(data)
;					}
				});
			}
		});
	</script>	

</body>
</html>
